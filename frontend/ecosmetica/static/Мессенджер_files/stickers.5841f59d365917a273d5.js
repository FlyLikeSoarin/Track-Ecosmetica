!function(t){function e(e){for(var n,a,s=e[0],c=e[1],u=e[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(l&&l(e);p.length;)p.shift()();return o.push.apply(o,u||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,s=1;s<i.length;s++){var c=i[s];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},r={"web/stickers":0},o=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/js/cmodules/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([276,"lottie","vendors","common"]),i()}({"0lFn":function(t,e,i){"use strict";i.r(e);var n=i("vzBJ"),r={autoplay:0,setAutoplay:function(t){this.autoplay=t},getAutoplay:function(){return r.autoplay}},o=(i("pIFo"),i("aJgW")),a={},s=(t,e,i,n)=>{delete a[e],1===n?Emoji.favorite.addFavoriteSticker(t,e,i):-1===n&&Emoji.favorite.deleteFavoriteSticker(t,e,i)};var c={toggleFavorite:function(t,e,i){if(e&&e.stopPropagation(),!hasClass(t,"on")&&Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers.length>=Emoji.favoriteLimit&&!Emoji.favoriteLimitNoticed){var n=langStr(getLang("purchases_stickers_favorite_limit_notice"),"%s",Emoji.favoriteLimit);return setTimeout(window.showFastBox(getLang("global_error"),n).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0,!1}var r=attr(t,"data-sticker-id"),o=attr(t,"data-hash");return!(!r||!o)&&(!a[r]&&(a[r]=1,toggleClass(t,"on"),void ajax.post("/stickers.php",{act:"toggle_favorite",sticker_id:r,hash:o},{onDone:s.pbind(i,r,t)})))},getStickerUrl:function(t,e){var i={id:t,size:e};if(window.isMVK){var n=String(e);return o.colorScheme.isDarkScheme()&&(n=n.replace(/b$/,"")+"b"),rs(window.store.stickers.url_template,{id:t,size:n})}return getTemplate("stickers_sticker_url",i)}};window.StickersAnimation=n.StickersAnimation,window.StickersSettings=r,window.Stickers=c;try{stManager.done(jsc("web/stickers.js"))}catch(t){}},276:function(t,e,i){t.exports=i("0lFn")},aJgW:function(t,e,i){"use strict";i.r(e),i.d(e,"ColorSchemeMode",(function(){return n})),i.d(e,"ColorSchemeName",(function(){return r})),i.d(e,"ColorScheme",(function(){return s})),i.d(e,"colorScheme",(function(){return a}));var n,r,o=i("J8bf");!function(t){t.Light="light",t.Dark="dark",t.Auto="auto"}(n||(n={})),function(t){t.Dark="space_gray",t.Light="bright_light"}(r||(r={}));var a,s=function(){function t(){this.currentMode="",this.subscribers=[],this.initSubscribers=[],this.isExecuted=!1,this.isModeSavingAllowed=!0,this.isSchemeSavingAllowed=!0}return t.prototype.init=function(e){var i=this;this.isExecuted||(this.schemesMap=e.schemesMap,this.setMode(e.mode),this.initSubscribers.forEach((function(t){t()})),t.isSchemesAutoSwitchingSupported()&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){i.currentMode===n.Auto&&i.setScheme(t.matches)})),this.isExecuted=!0))},t.prototype.setScheme=function(e){t.isSchemesSupported()&&(this.applyScheme(document.body,e?r.Dark:r.Light),this.currentIsDark=e,this.isSchemeSavingAllowed&&Object(o.setCookie)("remixdark_color_scheme",Number(e),365),this.subscribers.forEach((function(t){t()})))},t.prototype.isDarkScheme=function(){return this.currentIsDark},t.prototype.getMode=function(){return this.currentMode},t.prototype.setMode=function(e){this.currentMode=e;var i=!1;switch(e){case n.Light:i=!1;break;case n.Dark:i=!0;break;case n.Auto:if(t.isSchemesAutoSwitchingSupported())i=window.matchMedia("(prefers-color-scheme: dark)").matches}this.setScheme(i),this.isModeSavingAllowed&&Object(o.setCookie)("remixcolor_scheme_mode",e,365)},t.prototype.applyScheme=function(t,e){var i,n=(null===(i=this.schemesMap)||void 0===i?void 0:i[e])||e;t.setAttribute("scheme",n)},t.prototype.subscribe=function(t){var e=this;return this.subscribers.push(t),function(){e.subscribers=e.subscribers.filter((function(e){return t!==e}))}},t.prototype.onInit=function(t){var e=this;return this.initSubscribers.push(t),function(){e.initSubscribers=e.initSubscribers.filter((function(e){return t!==e}))}},t.isSchemesSupported=function(){return window.isNewMail&&window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")},t.isSchemesAutoSwitchingSupported=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches},t}();a=window.colorScheme?window.colorScheme:new s,window.colorScheme=a,window.isSchemesSupported=s.isSchemesSupported.bind(null)},vzBJ:function(t,e,i){"use strict";i.r(e),i.d(e,"StickersAnimation",(function(){return n}));i("VRzm"),i("Btvt"),i("a1Th");var n=function(){var t,e,i,r=!1,o=!1,a={},s={},c={},u={};function l(t){var e=f(t),i=1;if(e){hasClass(t,"animation_play")||(hide(geByClass1("sticker_img",t)),addClass(t,"animation_play")),e.play();var n=attr(t,"data-loop-count");n=parseInt(n),isNaN(n)&&(n=3),-1!==n&&(!e._cbs.loopComplete||e._cbs.loopComplete&&0===e._cbs.loopComplete.length)&&e.addEventListener("loopComplete",(function r(o){i++;var a=!0;n>=i&&(a=!1),a&&(p(t,!1),""!==e._cbs.loopComplete&&e.removeEventListener("loopComplete",r),e.stop())}))}}function d(t){var e=attr(t,"data-uid");return e||(e=attr(t,"data-uid",Math.random().toString(32).substr(2))),e}function p(t,e){u[d(t)]=e}function f(t){var e=attr(t,"data-uniq-id");if(!geByClass1("svg_sticker_animation",t))return!1;var i=s[e];return i||!1}function h(t,e){var n=f(t);if(n)"function"==typeof e&&e(n);else{var r=attr(t,"data-uniq-id");if(!u[d(t)]){p(t,!0);var o=attr(t,"data-animation-path"),c=attr(t,"data-sticker-id"),l=!1;if(c&&(l=(a[c]||o)&&v(t)),l){var h={container:t,renderer:"svg",loop:!0,autoplay:!1,name:r,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:"svg_sticker_animation"}};a[c]?h.animationData=a[c]:h.path=o;var m=geByClass1("svg_sticker_animation",t);if(m&&re(m),n=i.loadAnimation(h),!a[c])return void n.addEventListener("data_ready",(function(){a[c]=n.animationData,s[r]=n,"function"==typeof e&&e(n)}))}"function"==typeof e&&(s[r]=n,"function"==typeof e&&e(n))}}}function m(){return e().then(t=>(i=t,t))}return{init(t){e=t.animatorLoader},checkSettingsAndLoadInWeb:function(t){if(StickersSettings.getAutoplay()){var e=ge("fc_msg"+t),i=geByClass1("sticker_animation",e);n.loadAndPlaySticker(i)}},checkSettingsAndLoad:function(t){if(StickersSettings.getAutoplay()){var e=$(`.msg_id_${t} .sticker_animation`);n.loadAndPlaySticker(e)}},loadStickerInMvkIMAndPlay:function(t,e){var i="_msg"+t;e&&(i="msg_id_"+t);var r=geByClass1("sticker_animation",geByClass1(i));n.loadAndPlayStickerWithTimer(r,500)},loadAutoplayAnimationStickers:function(t){if(i){if(t){if(o)return;o=!0}if(!r){r=!0;var e=geByClass("sticker_animation_autoplay");e&&each(e,(function(t,e){h(e,(function(){l(e)}))})),r=!1}}else m().then(()=>{n.loadAutoplayAnimationStickers(t)})},loadAndPlaySticker:function(t){t&&(i?requestAnimationFrame(()=>{h(t,(function(){l(t)}))}):m().then(()=>{n.loadAndPlaySticker(t)}))},loadAndPlayStickerWithTimer:function(t,e){if(t&&!c[t]){e||(e=1e3);var i=ge(t);hasClass(i,"sticker_animation_disabled_timer")||(c[t]=setTimeout((function(){!i&&(i=ge(t),hasClass(i,"sticker_animation_disabled_timer"))||(n.loadAndPlaySticker(i),clearTimeout(c[t]),c[t]=!1)}),e))}},reloadStickers:function(){s={}},touchStartSticker:function(e){e.addEventListener("contextmenu",n.preventContextMenu,!1),t=setTimeout((function(){n.loadAndPlaySticker(e)}),500)},touchEndSticker:function(){t&&clearTimeout(t)},preventContextMenu:function(t){event.preventDefault(),event.stopPropagation()}};function v(t){var e=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom;return e<window.innerHeight&&i>=0&&isVisible(t)}}(),r=i("Jph1");n.init({animatorLoader:()=>Promise.resolve(r.default)})}});